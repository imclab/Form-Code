<html>
<head>
	<title>Repeat: Embedded Iteration</title>
	<meta name="author" content="David Wicks"/>
	<link rel="stylesheet" href="../styles/f+c.css"/>
	<!-- Date: 2011-02-20 -->
	<script>
	var option = 1;
	function draw(){
		var canvas = document.getElementById("repeat");
		if( canvas.getContext ){
			var ctx = canvas.getContext('2d');
			var margin = 50;
			var w = canvas.width;
			var h = canvas.height;
			ctx.clearRect( 0, 0, w, h );
			ctx.strokeStyle = "#F597B0";
			if(option == 1){
				// Option 1: Stitches
				for(var x = margin; x <= w-margin; x += 20 ){
					for(var y = margin; y <= h-margin; y += 20 ){
						ctx.beginPath();
						ctx.moveTo( x-5, y-5 );
						ctx.lineTo( x+5, y+5 );
						ctx.stroke();
						
						ctx.beginPath();
						ctx.moveTo( x+5, y-5 );
						ctx.lineTo( x-5, y+5 );
						ctx.stroke();
					}
				}
			} else if(option == 2){
				// Perspective
				for(var x = margin; x <= w-margin; x+=20){
					for( var y = margin; y <= h-margin; y+=20){
						ctx.beginPath();
						ctx.moveTo( x, y );
						ctx.lineTo( w/2, h/2 );
						ctx.stroke();
					}
				}
			} else if(option == 3){
				// Overlapping circles
				for(var x = margin; x <= w-margin; x+=20){
					for( var y = margin; y <= h-margin; y+=20){
						ctx.beginPath();
						ctx.arc(x, y, 20, 0, Math.PI*2);
						ctx.stroke();
					}
				}
			} else if(option == 4){
				// Rotating arcs
				var count = 120;
				for(var x = margin; x <= w-margin; x+=20){
					for( var y = margin; y <= h-margin; y+=20){
						var s = count/120.0 * Math.PI * 4;
						ctx.beginPath();
						ctx.arc(x, y, 7, s, s + Math.PI);
						ctx.stroke();
						count--;
					}
				}
			} else if(option == 5){
				// Groups of five
				for(var x = margin; x <= w-margin; x+=20){
					for( var y = margin; y <= h-margin; y+=20){
						for(var i=0; i < 16; i+=4){
							ctx.beginPath();
							ctx.moveTo( x+i, y );
							ctx.lineTo( x+i, y+12 );
							ctx.stroke();
						}
						ctx.beginPath();
						ctx.moveTo( x, y );
						ctx.lineTo( x+12, y+12 );
						ctx.stroke();
					}
				}
			}
		} else {
			alert("Sorry, your browser doesn't support canvas.");
		}
	}
	
	function redraw(){
		option += 1;
		if(option > 5) option = 1;		
		draw();
	}
	</script>
</head>
<body onload="draw();">
	<h1>Form+Code: Repeat</h1>
	<p>For more information, visit the <a href="http://formandcode.com/code-examples/repeat-embedded">Form+Code website</a>.</p>
	<p>Click to cycle through forms.</p>
	<canvas id="repeat" width="400" height="300" onclick="redraw();">
	</canvas>
</body>
</html>